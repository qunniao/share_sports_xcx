const app = getApp()
var area = [{
  "id": 933,
  "pid": 0,
  "name": "浙江省",
  "country": "zh",
  "level": 1,
  "lng": "120.153576",
  "lat": "30.287459",
  "agent_id": 4,
  "state": "1",
  "_child": [{
    "id": 934,
    "pid": 933,
    "name": "杭州市",
    "country": "zh",
    "level": 2,
    "lng": "120.153576",
    "lat": "30.287459",
    "agent_id": 3,
    "state": "1",
    "_child": [{
      "id": 935,
      "pid": 934,
      "name": "上城区",
      "country": "zh",
      "level": 3,
      "lng": "120.16922",
      "lat": "30.24255",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 936,
      "pid": 934,
      "name": "下城区",
      "country": "zh",
      "level": 3,
      "lng": "120.18096",
      "lat": "30.28153",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 937,
      "pid": 934,
      "name": "江干区",
      "country": "zh",
      "level": 3,
      "lng": "120.20517",
      "lat": "30.2572",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 938,
      "pid": 934,
      "name": "拱墅区",
      "country": "zh",
      "level": 3,
      "lng": "120.14209",
      "lat": "30.31968",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 939,
      "pid": 934,
      "name": "西湖区",
      "country": "zh",
      "level": 3,
      "lng": "120.12979",
      "lat": "30.25949",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 940,
      "pid": 934,
      "name": "滨江区",
      "country": "zh",
      "level": 3,
      "lng": "120.21194",
      "lat": "30.20835",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 941,
      "pid": 934,
      "name": "萧山区",
      "country": "zh",
      "level": 3,
      "lng": "120.26452",
      "lat": "30.18505",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 942,
      "pid": 934,
      "name": "余杭区",
      "country": "zh",
      "level": 3,
      "lng": "120.29986",
      "lat": "30.41829",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 943,
      "pid": 934,
      "name": "桐庐县",
      "country": "zh",
      "level": 3,
      "lng": "119.68853",
      "lat": "29.79779",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 944,
      "pid": 934,
      "name": "淳安县",
      "country": "zh",
      "level": 3,
      "lng": "119.04257",
      "lat": "29.60988",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 945,
      "pid": 934,
      "name": "建德市",
      "country": "zh",
      "level": 3,
      "lng": "119.28158",
      "lat": "29.47603",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 946,
      "pid": 934,
      "name": "富阳区",
      "country": "zh",
      "level": 3,
      "lng": "119.96041",
      "lat": "30.04878",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 947,
      "pid": 934,
      "name": "临安市",
      "country": "zh",
      "level": 3,
      "lng": "119.72473",
      "lat": "30.23447",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 948,
    "pid": 933,
    "name": "宁波市",
    "country": "zh",
    "level": 2,
    "lng": "121.549792",
    "lat": "29.868388",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 949,
      "pid": 948,
      "name": "海曙区",
      "country": "zh",
      "level": 3,
      "lng": "121.55106",
      "lat": "29.85977",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 950,
      "pid": 948,
      "name": "江东区",
      "country": "zh",
      "level": 3,
      "lng": "121.57028",
      "lat": "29.86701",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 951,
      "pid": 948,
      "name": "江北区",
      "country": "zh",
      "level": 3,
      "lng": "121.55681",
      "lat": "29.88776",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 952,
      "pid": 948,
      "name": "北仑区",
      "country": "zh",
      "level": 3,
      "lng": "121.84408",
      "lat": "29.90069",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 953,
      "pid": 948,
      "name": "镇海区",
      "country": "zh",
      "level": 3,
      "lng": "121.71615",
      "lat": "29.94893",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 954,
      "pid": 948,
      "name": "鄞州区",
      "country": "zh",
      "level": 3,
      "lng": "121.54754",
      "lat": "29.81614",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 955,
      "pid": 948,
      "name": "象山县",
      "country": "zh",
      "level": 3,
      "lng": "121.86917",
      "lat": "29.47758",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 956,
      "pid": 948,
      "name": "宁海县",
      "country": "zh",
      "level": 3,
      "lng": "121.43072",
      "lat": "29.2889",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 957,
      "pid": 948,
      "name": "余姚市",
      "country": "zh",
      "level": 3,
      "lng": "121.15341",
      "lat": "30.03867",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 958,
      "pid": 948,
      "name": "慈溪市",
      "country": "zh",
      "level": 3,
      "lng": "121.26641",
      "lat": "30.16959",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 959,
      "pid": 948,
      "name": "奉化市",
      "country": "zh",
      "level": 3,
      "lng": "121.41003",
      "lat": "29.65537",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 960,
    "pid": 933,
    "name": "温州市",
    "country": "zh",
    "level": 2,
    "lng": "120.672111",
    "lat": "28.000575",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 961,
      "pid": 960,
      "name": "鹿城区",
      "country": "zh",
      "level": 3,
      "lng": "120.65505",
      "lat": "28.01489",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 962,
      "pid": 960,
      "name": "龙湾区",
      "country": "zh",
      "level": 3,
      "lng": "120.83053",
      "lat": "27.91284",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 963,
      "pid": 960,
      "name": "瓯海区",
      "country": "zh",
      "level": 3,
      "lng": "120.63751",
      "lat": "28.00714",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 964,
      "pid": 960,
      "name": "洞头县",
      "country": "zh",
      "level": 3,
      "lng": "121.15606",
      "lat": "27.83634",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 965,
      "pid": 960,
      "name": "永嘉县",
      "country": "zh",
      "level": 3,
      "lng": "120.69317",
      "lat": "28.15456",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 966,
      "pid": 960,
      "name": "平阳县",
      "country": "zh",
      "level": 3,
      "lng": "120.56506",
      "lat": "27.66245",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 967,
      "pid": 960,
      "name": "苍南县",
      "country": "zh",
      "level": 3,
      "lng": "120.42608",
      "lat": "27.51739",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 968,
      "pid": 960,
      "name": "文成县",
      "country": "zh",
      "level": 3,
      "lng": "120.09063",
      "lat": "27.78678",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 969,
      "pid": 960,
      "name": "泰顺县",
      "country": "zh",
      "level": 3,
      "lng": "119.7182",
      "lat": "27.55694",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 970,
      "pid": 960,
      "name": "瑞安市",
      "country": "zh",
      "level": 3,
      "lng": "120.65466",
      "lat": "27.78041",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 971,
      "pid": 960,
      "name": "乐清市",
      "country": "zh",
      "level": 3,
      "lng": "120.9617",
      "lat": "28.12404",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 972,
    "pid": 933,
    "name": "嘉兴市",
    "country": "zh",
    "level": 2,
    "lng": "120.750865",
    "lat": "30.762653",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 973,
      "pid": 972,
      "name": "南湖区",
      "country": "zh",
      "level": 3,
      "lng": "120.78524",
      "lat": "30.74865",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 974,
      "pid": 972,
      "name": "秀洲区",
      "country": "zh",
      "level": 3,
      "lng": "120.70867",
      "lat": "30.76454",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 975,
      "pid": 972,
      "name": "嘉善县",
      "country": "zh",
      "level": 3,
      "lng": "120.92559",
      "lat": "30.82993",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 976,
      "pid": 972,
      "name": "海盐县",
      "country": "zh",
      "level": 3,
      "lng": "120.9457",
      "lat": "30.52547",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 977,
      "pid": 972,
      "name": "海宁市",
      "country": "zh",
      "level": 3,
      "lng": "120.6813",
      "lat": "30.5097",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 978,
      "pid": 972,
      "name": "平湖市",
      "country": "zh",
      "level": 3,
      "lng": "121.02166",
      "lat": "30.69618",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 979,
      "pid": 972,
      "name": "桐乡市",
      "country": "zh",
      "level": 3,
      "lng": "120.56485",
      "lat": "30.6302",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 980,
    "pid": 933,
    "name": "湖州市",
    "country": "zh",
    "level": 2,
    "lng": "120.102398",
    "lat": "30.867198",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 981,
      "pid": 980,
      "name": "吴兴区",
      "country": "zh",
      "level": 3,
      "lng": "120.12548",
      "lat": "30.85752",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 982,
      "pid": 980,
      "name": "南浔区",
      "country": "zh",
      "level": 3,
      "lng": "120.42038",
      "lat": "30.86686",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 983,
      "pid": 980,
      "name": "德清县",
      "country": "zh",
      "level": 3,
      "lng": "119.97836",
      "lat": "30.53369",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 984,
      "pid": 980,
      "name": "长兴县",
      "country": "zh",
      "level": 3,
      "lng": "119.90783",
      "lat": "31.00606",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 985,
      "pid": 980,
      "name": "安吉县",
      "country": "zh",
      "level": 3,
      "lng": "119.68158",
      "lat": "30.63798",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 986,
    "pid": 933,
    "name": "绍兴市",
    "country": "zh",
    "level": 2,
    "lng": "120.582112",
    "lat": "29.997117",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 987,
      "pid": 986,
      "name": "越城区",
      "country": "zh",
      "level": 3,
      "lng": "120.5819",
      "lat": "29.98895",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 988,
      "pid": 986,
      "name": "柯桥区",
      "country": "zh",
      "level": 3,
      "lng": "120.492736",
      "lat": "30.08763",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 989,
      "pid": 986,
      "name": "上虞区",
      "country": "zh",
      "level": 3,
      "lng": "120.476075",
      "lat": "30.078038",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 990,
      "pid": 986,
      "name": "新昌县",
      "country": "zh",
      "level": 3,
      "lng": "120.90435",
      "lat": "29.49991",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 991,
      "pid": 986,
      "name": "诸暨市",
      "country": "zh",
      "level": 3,
      "lng": "120.23629",
      "lat": "29.71358",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 992,
      "pid": 986,
      "name": "嵊州市",
      "country": "zh",
      "level": 3,
      "lng": "120.82174",
      "lat": "29.58854",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 993,
    "pid": 933,
    "name": "金华市",
    "country": "zh",
    "level": 2,
    "lng": "119.649506",
    "lat": "29.089524",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 994,
      "pid": 993,
      "name": "婺城区",
      "country": "zh",
      "level": 3,
      "lng": "119.57135",
      "lat": "29.09521",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 995,
      "pid": 993,
      "name": "金东区",
      "country": "zh",
      "level": 3,
      "lng": "119.69302",
      "lat": "29.0991",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 996,
      "pid": 993,
      "name": "武义县",
      "country": "zh",
      "level": 3,
      "lng": "119.8164",
      "lat": "28.89331",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 997,
      "pid": 993,
      "name": "浦江县",
      "country": "zh",
      "level": 3,
      "lng": "119.89181",
      "lat": "29.45353",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 998,
      "pid": 993,
      "name": "磐安县",
      "country": "zh",
      "level": 3,
      "lng": "120.45022",
      "lat": "29.05733",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 999,
      "pid": 993,
      "name": "兰溪市",
      "country": "zh",
      "level": 3,
      "lng": "119.45965",
      "lat": "29.20841",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1000,
      "pid": 993,
      "name": "义乌市",
      "country": "zh",
      "level": 3,
      "lng": "120.0744",
      "lat": "29.30558",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1001,
      "pid": 993,
      "name": "东阳市",
      "country": "zh",
      "level": 3,
      "lng": "120.24185",
      "lat": "29.28942",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1002,
      "pid": 993,
      "name": "永康市",
      "country": "zh",
      "level": 3,
      "lng": "120.04727",
      "lat": "28.88844",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 1003,
    "pid": 933,
    "name": "衢州市",
    "country": "zh",
    "level": 2,
    "lng": "118.87263",
    "lat": "28.941708",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 1004,
      "pid": 1003,
      "name": "柯城区",
      "country": "zh",
      "level": 3,
      "lng": "118.87109",
      "lat": "28.96858",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1005,
      "pid": 1003,
      "name": "衢江区",
      "country": "zh",
      "level": 3,
      "lng": "118.9598",
      "lat": "28.97977",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1006,
      "pid": 1003,
      "name": "常山县",
      "country": "zh",
      "level": 3,
      "lng": "118.51025",
      "lat": "28.90191",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1007,
      "pid": 1003,
      "name": "开化县",
      "country": "zh",
      "level": 3,
      "lng": "118.41616",
      "lat": "29.13785",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1008,
      "pid": 1003,
      "name": "龙游县",
      "country": "zh",
      "level": 3,
      "lng": "119.17221",
      "lat": "29.02823",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1009,
      "pid": 1003,
      "name": "江山市",
      "country": "zh",
      "level": 3,
      "lng": "118.62674",
      "lat": "28.7386",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 1010,
    "pid": 933,
    "name": "舟山市",
    "country": "zh",
    "level": 2,
    "lng": "122.106863",
    "lat": "30.016028",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 1011,
      "pid": 1010,
      "name": "定海区",
      "country": "zh",
      "level": 3,
      "lng": "122.10677",
      "lat": "30.01985",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1012,
      "pid": 1010,
      "name": "普陀区",
      "country": "zh",
      "level": 3,
      "lng": "122.30278",
      "lat": "29.94908",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1013,
      "pid": 1010,
      "name": "岱山县",
      "country": "zh",
      "level": 3,
      "lng": "122.20486",
      "lat": "30.24385",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1014,
      "pid": 1010,
      "name": "嵊泗县",
      "country": "zh",
      "level": 3,
      "lng": "122.45129",
      "lat": "30.72678",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 1015,
    "pid": 933,
    "name": "台州市",
    "country": "zh",
    "level": 2,
    "lng": "121.428599",
    "lat": "28.661378",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 1016,
      "pid": 1015,
      "name": "椒江区",
      "country": "zh",
      "level": 3,
      "lng": "121.44287",
      "lat": "28.67301",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1017,
      "pid": 1015,
      "name": "黄岩区",
      "country": "zh",
      "level": 3,
      "lng": "121.25891",
      "lat": "28.65077",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1018,
      "pid": 1015,
      "name": "路桥区",
      "country": "zh",
      "level": 3,
      "lng": "121.37381",
      "lat": "28.58016",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1019,
      "pid": 1015,
      "name": "玉环县",
      "country": "zh",
      "level": 3,
      "lng": "121.23242",
      "lat": "28.13637",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1020,
      "pid": 1015,
      "name": "三门县",
      "country": "zh",
      "level": 3,
      "lng": "121.3937",
      "lat": "29.1051",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1021,
      "pid": 1015,
      "name": "天台县",
      "country": "zh",
      "level": 3,
      "lng": "121.00848",
      "lat": "29.1429",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1022,
      "pid": 1015,
      "name": "仙居县",
      "country": "zh",
      "level": 3,
      "lng": "120.72872",
      "lat": "28.84672",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1023,
      "pid": 1015,
      "name": "温岭市",
      "country": "zh",
      "level": 3,
      "lng": "121.38595",
      "lat": "28.37176",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1024,
      "pid": 1015,
      "name": "临海市",
      "country": "zh",
      "level": 3,
      "lng": "121.13885",
      "lat": "28.85603",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 1025,
    "pid": 933,
    "name": "丽水市",
    "country": "zh",
    "level": 2,
    "lng": "119.921786",
    "lat": "28.451993",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 1026,
      "pid": 1025,
      "name": "莲都区",
      "country": "zh",
      "level": 3,
      "lng": "119.9127",
      "lat": "28.44583",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1027,
      "pid": 1025,
      "name": "青田县",
      "country": "zh",
      "level": 3,
      "lng": "120.29028",
      "lat": "28.13897",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1028,
      "pid": 1025,
      "name": "缙云县",
      "country": "zh",
      "level": 3,
      "lng": "120.09036",
      "lat": "28.65944",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1029,
      "pid": 1025,
      "name": "遂昌县",
      "country": "zh",
      "level": 3,
      "lng": "119.27606",
      "lat": "28.59291",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1030,
      "pid": 1025,
      "name": "松阳县",
      "country": "zh",
      "level": 3,
      "lng": "119.48199",
      "lat": "28.4494",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1031,
      "pid": 1025,
      "name": "云和县",
      "country": "zh",
      "level": 3,
      "lng": "119.57287",
      "lat": "28.11643",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1032,
      "pid": 1025,
      "name": "庆元县",
      "country": "zh",
      "level": 3,
      "lng": "119.06256",
      "lat": "27.61842",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1033,
      "pid": 1025,
      "name": "景宁畲族自治县",
      "country": "zh",
      "level": 3,
      "lng": "119.63839",
      "lat": "27.97393",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1034,
      "pid": 1025,
      "name": "龙泉市",
      "country": "zh",
      "level": 3,
      "lng": "119.14163",
      "lat": "28.0743",
      "agent_id": 1,
      "state": "1"
    }]
  }, {
    "id": 1035,
    "pid": 933,
    "name": "舟山群岛新区",
    "country": "zh",
    "level": 2,
    "lng": "122.317657",
    "lat": "29.813242",
    "agent_id": 2,
    "state": "1",
    "_child": [{
      "id": 1036,
      "pid": 1035,
      "name": "金塘岛",
      "country": "zh",
      "level": 3,
      "lng": "121.893373",
      "lat": "30.040641",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1037,
      "pid": 1035,
      "name": "六横岛",
      "country": "zh",
      "level": 3,
      "lng": "122.14265",
      "lat": "29.662938",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1038,
      "pid": 1035,
      "name": "衢山岛",
      "country": "zh",
      "level": 3,
      "lng": "122.358425",
      "lat": "30.442642",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1039,
      "pid": 1035,
      "name": "舟山本岛西北部",
      "country": "zh",
      "level": 3,
      "lng": "122.03064",
      "lat": "30.140377",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1040,
      "pid": 1035,
      "name": "岱山岛西南部",
      "country": "zh",
      "level": 3,
      "lng": "122.180123",
      "lat": "30.277269",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1041,
      "pid": 1035,
      "name": "泗礁岛",
      "country": "zh",
      "level": 3,
      "lng": "122.45803",
      "lat": "30.725112",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1042,
      "pid": 1035,
      "name": "朱家尖岛",
      "country": "zh",
      "level": 3,
      "lng": "122.390636",
      "lat": "29.916303",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1043,
      "pid": 1035,
      "name": "洋山岛",
      "country": "zh",
      "level": 3,
      "lng": "121.995891",
      "lat": "30.094637",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1044,
      "pid": 1035,
      "name": "长涂岛",
      "country": "zh",
      "level": 3,
      "lng": "122.284681",
      "lat": "30.24888",
      "agent_id": 1,
      "state": "1"
    }, {
      "id": 1045,
      "pid": 1035,
      "name": "虾峙岛",
      "country": "zh",
      "level": 3,
      "lng": "122.244686",
      "lat": "29.752941",
      "agent_id": 1,
      "state": "1"
    }]
  }]
}];
Component({
  properties: {
    showRegion: {
      type: Boolean,
      observer: function (newVal, oldVal) {
        this.setData({
          dialog: newVal,
        });
      },
    },
    regionValue: {
      type: Array,
      value: [],
      observer: function (newVal, oldVal) {
        if (newVal.length > 0) {
          let select = -1;
          for (let i = newVal.length - 1; i >= 0; i--) {
            if (newVal[i].id !== '') {
              select = i;
              break;
            }
          }
          // 除最低级别区（select = 2）以外，需要获取当前级别下一级的数据
          this.setData({
            ['region.tabs']: newVal,
            ['region.select']: select < 2 ? select + 1 : select,
          }, () => {
            this.setData({
              area: this.getChildArea(select < 2 ? select + 1 : select),
            });
          });
        }
      },
    },
  },
  data: {
    dialog: false,
    area: area,
    region: {
      tabs: [
        {
          name: '请选择',
          id: '',
        },
        {
          name: '请选择',
          id: '',
        },
        {
          name: '请选择',
          id: '',
        },
      ],
      select: 0,
    },
  },
  methods: {
    // 关闭 picker 触发的方法
    emitHideRegion: function () {
      if (this.data.region.tabs[2].id === '') {
        wx.showToast({
          title: '请选择所在地',
          icon: 'none',
          duration: 2000,
        });
        return false;
      }
      let myEventDetail = {}; // detail对象，提供给事件监听函数
      let myEventOption = {}; // 触发事件的选项
      this.setData({
        dialog: !this.data.dialog,
      });
      myEventDetail = {
        showRegion: this.data.dialog,
        regionValue: this.data.region.tabs,
      };
      this.triggerEvent('myevent', myEventDetail, myEventOption);
    },
    bindRegionChange: function (e) {
      // 获取当前选中项的name和id并赋值给data中的数据
      let id = 'region.tabs[' + this.data.region.select + '].id';
      let name = 'region.tabs[' + this.data.region.select + '].name';
      this.setData({
        [id]: e.target.dataset.id,
        [name]: e.target.dataset.name,
      });
      // 除了三级以外的需要获取对应子选项
      if (this.data.region.select < 2) {
        this.setData({
          ['region.select']: ++this.data.region.select,
        }, () => {
          // 获取子选项
          this.setData({
            area: this.getChildArea(this.data.region.select),
          });
        });
      } else {
        // 三级选项选择完毕关闭省市区选择器
        this.emitHideRegion();
      }
    },
    getChildArea: function (level) {
      let _id = '';
      // 默认取完整的数据
      let _area = area;
      // 根据层级取当前层级下的数据
      for (let i = 0; i < level; i++) {
        _id = this.data.region.tabs[i].id;
        for (let j = 0; j < _area.length; j++) {
          if (_area[j].id === _id) {
            _area = _area[j]._child;
            break;
          }
        }
      }
      return _area;
    },
    // 省市区tab切换
    changeRegionLevel: function (e) {
      let level = e.target.dataset.level;
      // 三级选项的tab点击无效果
      if (level === 2) return false;
      // 当前选中tab和级别小于当前选中tab的状态都置为初始化状态
      for (let i = level; i < 3; i++) {
        let string = 'region.tabs[' + i + ']';
        this.setData({
          [string]: {
            name: '请选择',
            id: '',
          },
        });
      }
      this.setData({
        ['region.select']: level,
      });
      this.setData({
        area: this.getChildArea(level),
      });
    },
  },
});